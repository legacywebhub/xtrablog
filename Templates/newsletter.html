{% extends 'base.html' %}
{% load static %}

{% block title %}
<title>Newsletter | Xtra Blog</title>
{% endblock%}

{% block body %}
{% for message in messages %}
<h5>{{message}}</h5>
{% endfor %}
<div class="row tm-row tm-mb-120">
    <div class="col-12">
        <hr class="tm-hr-primary" style="margin-bottom: 30px;">
        <h2 class="tm-color-primary tm-post-title tm-mb-60">Reach out to subscribers</h2>
    </div>
    <div class="col-lg-7 tm-contact-left">
        <form method="POST" action="" class="mb-5 ml-auto mr-0 tm-contact-form" enctype="multipart/form-data">
            {% csrf_token %}     
            <div class="form-group row mb-4">
                <label for="password" class="col-sm-3 col-form-label text-right tm-color-primary">Password</label>
                <div class="col-sm-9">
                    <input type="text" name="password" class="form-control mr-0 ml-auto" id="password"  required>
                </div>
            </div>                   
            <div class="form-group row mb-4">
                <label for="subject" class="col-sm-3 col-form-label text-right tm-color-primary">Subject</label>
                <div class="col-sm-9">
                    <input class="form-control mr-0 ml-auto" name="subject" type="text" required>
                </div>
            </div>
            <div class="form-group row mb-4">
                <label for="file" class="col-sm-3 col-form-label text-right tm-color-primary">File</label>
                <div class="col-sm-9">
                    <input class="form-control mr-0 ml-auto" name="file" type="file">
                </div>
            </div>
            <div class="form-group row mb-5">
                <label for="message" class="col-sm-3 col-form-label text-right tm-color-primary">Message</label>
                <div class="col-sm-9">
                    <textarea class="form-control mr-0 ml-auto" name="message" id="message" rows="8"></textarea>                                
                </div>
            </div>
            <div class="form-group row text-right">
                <div class="col-12">
                    <button class="tm-btn tm-btn-primary tm-btn-small" name="newsletter-submit">Forward</button>                        
                </div>                            
            </div>                                
        </form>
    </div>
</div>

<!-- script to limit the number of files that can be sent through newsletter -->
<script>
$("#file").on("change", function(){
    if ($("#file")[0].files.length > 3) {
        swal("Attention", "Maximum allowed is up to 3 files", "info");
        $(this).val('');
        return false;
    } else {
        return true;
    }
})
</script>
{% endblock %}     
